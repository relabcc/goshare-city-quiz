{"version":3,"file":"component---src-templates-question-js-e20663fdaa24a9c2cafa.js","mappings":"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","sources":["webpack://styled-gatsby-starter/./node_modules/@chakra-ui/button/dist/esm/icon-button.js","webpack://styled-gatsby-starter/./src/templates/question.js","webpack://styled-gatsby-starter/./node_modules/lodash/_assignValue.js","webpack://styled-gatsby-starter/./node_modules/lodash/_baseAssignValue.js","webpack://styled-gatsby-starter/./node_modules/lodash/_baseSet.js","webpack://styled-gatsby-starter/./node_modules/lodash/_defineProperty.js","webpack://styled-gatsby-starter/./node_modules/lodash/set.js"],"sourcesContent":["function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nimport { forwardRef } from \"@chakra-ui/system\";\nimport { __DEV__ } from \"@chakra-ui/utils\";\nimport * as React from \"react\";\nimport { Button } from \"./button\";\nexport var IconButton = /*#__PURE__*/forwardRef(function (props, ref) {\n  var icon = props.icon,\n      children = props.children,\n      isRound = props.isRound,\n      ariaLabel = props[\"aria-label\"],\n      rest = _objectWithoutPropertiesLoose(props, [\"icon\", \"children\", \"isRound\", \"aria-label\"]);\n  /**\n   * Passing the icon as prop or children should work\n   */\n\n\n  var element = icon || children;\n\n  var _children = /*#__PURE__*/React.isValidElement(element) ? /*#__PURE__*/React.cloneElement(element, {\n    \"aria-hidden\": true,\n    focusable: false\n  }) : null;\n\n  return /*#__PURE__*/React.createElement(Button, _extends({\n    padding: \"0\",\n    borderRadius: isRound ? \"full\" : undefined,\n    ref: ref,\n    \"aria-label\": ariaLabel\n  }, rest), _children);\n});\n\nif (__DEV__) {\n  IconButton.displayName = \"IconButton\";\n}","import React, { useEffect, useMemo } from 'react'\r\nimport { graphql, navigate } from 'gatsby'\r\nimport { useFormikContext } from 'formik';\r\nimport { TiArrowLeft } from \"react-icons/ti\";\r\nimport { IconButton } from '@chakra-ui/react'\r\nimport { set } from 'lodash';\r\nimport AniLink from \"gatsby-plugin-transition-link/AniLink\"\r\n\r\nimport Box from '../components/Box'\r\nimport Link from '../components/Link'\r\nimport Text from '../components/Text'\r\nimport Flex from '../components/Flex'\r\nimport Button from '../components/Button'\r\nimport Container from '../components/Container'\r\n\r\nimport Layout from '../containers/Layout'\r\nimport score from '../json/score';\r\n\r\nconst Question = ({ data, pageContext: { id, isLast, length } }) => {\r\n  const { values, submitForm } = useFormikContext()\r\n  useEffect(() => {\r\n    if(values.answers.length < +id) {\r\n      navigate(`/q/${values.answers.length + 1}`)\r\n    }\r\n  }, [values.answers, id])\r\n  const calculateScore = Object.values(score)\r\n  const totolPoints = calculateScore.reduce((res, scores) => {\r\n    const point = scores.reduce((total, num, i) => {\r\n      total = total + (num[values.answers[i]] || +'0')\r\n      return total\r\n    }, 0)\r\n    res.push(point)\r\n    return res\r\n  },[])\r\n  console.log(values, calculateScore, totolPoints)\r\n  return (\r\n    <Layout title={`第${id}題`}>\r\n      <Box bg=\"white\" height=\"100%\">\r\n        <Container>\r\n          <Flex alignItems=\"center\">\r\n            {id > 1 && <IconButton as={AniLink} swipe direction=\"right\" to={`/q/${id - 1}`} mr=\"0.25em\" minWidth=\"auto\" w=\"1.5em\" h=\"1.5em\" isRound bg=\"black\" color=\"white\" icon={<TiArrowLeft size=\"1.5em\" />} />}\r\n            <Text fontWeight=\"bold\"><Text.Inline fontSize=\"2em\">{id}</Text.Inline>/ {length}</Text>\r\n          </Flex>\r\n          <Text>{data?.questionsJson.question}</Text>\r\n          <Box>\r\n            {data?.questionsJson.options.map((opt, i) => (\r\n              <Box mt=\"1em\" key={i}>\r\n                <Button\r\n                  as={!isLast && ((p) => <AniLink top=\"entry\" {...p} />)}\r\n                  onClick={() => {\r\n                    set(values, ['answers', +id - 1], i)\r\n                    if(isLast) {\r\n                      submitForm()\r\n                    }\r\n                  }}\r\n                  to={!isLast && `/q/${+id + 1}`}\r\n                  swipe\r\n                  direction=\"left\"\r\n                  width=\"100%\"\r\n                >\r\n                  {opt}\r\n                </Button>\r\n              </Box>\r\n            ))}\r\n          </Box>\r\n        </Container>\r\n      </Box>\r\n    </Layout>\r\n  )\r\n}\r\n\r\nexport default Question\r\n\r\nexport const query = graphql`\r\n  query QuestionPageQuery($id: String) {\r\n    questionsJson(id: {eq: $id}) {\r\n      question\r\n      options\r\n    }\r\n  }\r\n`\r\n\r\n\r\n","var baseAssignValue = require('./_baseAssignValue'),\n    eq = require('./eq');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Assigns `value` to `key` of `object` if the existing value is not equivalent\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignValue(object, key, value) {\n  var objValue = object[key];\n  if (!(hasOwnProperty.call(object, key) && eq(objValue, value)) ||\n      (value === undefined && !(key in object))) {\n    baseAssignValue(object, key, value);\n  }\n}\n\nmodule.exports = assignValue;\n","var defineProperty = require('./_defineProperty');\n\n/**\n * The base implementation of `assignValue` and `assignMergeValue` without\n * value checks.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction baseAssignValue(object, key, value) {\n  if (key == '__proto__' && defineProperty) {\n    defineProperty(object, key, {\n      'configurable': true,\n      'enumerable': true,\n      'value': value,\n      'writable': true\n    });\n  } else {\n    object[key] = value;\n  }\n}\n\nmodule.exports = baseAssignValue;\n","var assignValue = require('./_assignValue'),\n    castPath = require('./_castPath'),\n    isIndex = require('./_isIndex'),\n    isObject = require('./isObject'),\n    toKey = require('./_toKey');\n\n/**\n * The base implementation of `_.set`.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {Array|string} path The path of the property to set.\n * @param {*} value The value to set.\n * @param {Function} [customizer] The function to customize path creation.\n * @returns {Object} Returns `object`.\n */\nfunction baseSet(object, path, value, customizer) {\n  if (!isObject(object)) {\n    return object;\n  }\n  path = castPath(path, object);\n\n  var index = -1,\n      length = path.length,\n      lastIndex = length - 1,\n      nested = object;\n\n  while (nested != null && ++index < length) {\n    var key = toKey(path[index]),\n        newValue = value;\n\n    if (key === '__proto__' || key === 'constructor' || key === 'prototype') {\n      return object;\n    }\n\n    if (index != lastIndex) {\n      var objValue = nested[key];\n      newValue = customizer ? customizer(objValue, key, nested) : undefined;\n      if (newValue === undefined) {\n        newValue = isObject(objValue)\n          ? objValue\n          : (isIndex(path[index + 1]) ? [] : {});\n      }\n    }\n    assignValue(nested, key, newValue);\n    nested = nested[key];\n  }\n  return object;\n}\n\nmodule.exports = baseSet;\n","var getNative = require('./_getNative');\n\nvar defineProperty = (function() {\n  try {\n    var func = getNative(Object, 'defineProperty');\n    func({}, '', {});\n    return func;\n  } catch (e) {}\n}());\n\nmodule.exports = defineProperty;\n","var baseSet = require('./_baseSet');\n\n/**\n * Sets the value at `path` of `object`. If a portion of `path` doesn't exist,\n * it's created. Arrays are created for missing index properties while objects\n * are created for all other missing properties. Use `_.setWith` to customize\n * `path` creation.\n *\n * **Note:** This method mutates `object`.\n *\n * @static\n * @memberOf _\n * @since 3.7.0\n * @category Object\n * @param {Object} object The object to modify.\n * @param {Array|string} path The path of the property to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns `object`.\n * @example\n *\n * var object = { 'a': [{ 'b': { 'c': 3 } }] };\n *\n * _.set(object, 'a[0].b.c', 4);\n * console.log(object.a[0].b.c);\n * // => 4\n *\n * _.set(object, ['x', '0', 'y', 'z'], 5);\n * console.log(object.x[0].y.z);\n * // => 5\n */\nfunction set(object, path, value) {\n  return object == null ? object : baseSet(object, path, value);\n}\n\nmodule.exports = set;\n"],"names":["_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","this","IconButton","props","ref","icon","children","isRound","ariaLabel","rest","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","element","_children","focusable","padding","borderRadius","undefined","displayName","data","pageContext","id","isLast","useFormikContext","values","submitForm","useEffect","answers","navigate","calculateScore","score","totolPoints","reduce","res","scores","point","total","num","push","console","log","Layout","title","Box","bg","height","Container","Flex","alignItems","as","AniLink","swipe","direction","to","mr","minWidth","w","h","color","size","Text","fontWeight","fontSize","questionsJson","question","options","map","opt","mt","Button","p","top","onClick","width","baseAssignValue","eq","module","exports","object","value","objValue","defineProperty","assignValue","castPath","isIndex","isObject","toKey","path","customizer","index","lastIndex","nested","newValue","getNative","func","e","baseSet"],"sourceRoot":""}